<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:v-bind="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <title>供货存管理系统</title>
    <link rel="stylesheet" href="layui/css/layui.css"/>
    <link rel="stylesheet" href="layui/css/ms.css"/>
    <script src="layui/lay/modules/jquery.min.js"></script>
    <script src="layui/layui.js"></script>
</head>
<body>
        <!-- 内容主体区域 -->
        <div style="padding: 15px;">
            <table class="layui-table">
                <thead>
                <tr>
                    <th>订单流水号</th>
                    <th>货品名称</th>
                    <th>供货商</th>
                    <th>订货日期</th>
                    <th>价格</th>
                    <th>订货量</th>
                    <th>发票状况</th>
                    <th>备注</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody id="order_list">
                </tbody>
            </table>
        </div>
<!--下拉框更新AJAX-->
<script>
    /*<![CDATA[*/
    $(function () {
            $.ajax({
                type:"GET",
                url:"/web/order/getCheck.do",
                success:function (data) {
                    console.log(data);
                    var i;
                    for (i = 0; i < data.length; i++) {
                        var time =new Date(parseInt(data[i].or_date));
                        $('#order_list').append("<tr>" +
                                "<td>" + data[i].or_id + "</td>" +
                                "<td>" + data[i].su_name + "</td>" +
                                "<td>" + data[i].supplier_office + "</td>" +
                                "<td>" + time.toLocaleDateString() + "</td>" +
                                "<td>" + data[i].or_price + "</td>" +
                                "<td>" + data[i].or_number + "</td>" +
                                "<td>" + data[i].or_invoice + "</td>" +
                                "<td>" + data[i].or_other + "</td>" +
                                "<td><button onclick='inbound(this)' bind='"+data[i].or_id+"' class='layui-btn layui-btn-mini'>入库</button>" +
                                "<button onclick='delOrder(this)' bind='"+data[i].or_id+"' class='layui-btn layui-btn-mini'>删除</button></td>" +
                        "</tr>"
                    )
                    }
                }
            })
    });
    /*]]>*/
</script>
<!--Layui启动代码-->
<script>
    //JavaScript代码区域
    layui.use('element', function(){
        var element = layui.element;
    });

</script>

<!--CURD代码-->
<script>
    function inbound(btn)
    {
        var re=  window.confirm("确定要入库吗？");
        var order_id=$(btn).attr('bind');
        var order_token=3;
        if(re==true)
        {
            $.ajax({
                url:"/web/order/inbound.do",
                data:{
                    id:order_id,
                    token:order_token
                },
                success:function (msg) {
                    alert(msg);
                    location.reload();
                }
            })
        }
    }
    function delOrder(btn) {
        var re=  window.confirm("确定要删除订单吗？");
        var order_id=$(btn).attr('bind');
        var order_token=3;
        if(re==true)
        {
            $.ajax({
                url:"/web/order/del.do",
                data:{
                    id:order_id,
                },
                success:function (msg) {
                    alert(msg);
                }
            })
        }
    }
</script>
</body>
</html>